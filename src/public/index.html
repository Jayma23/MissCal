<!DOCTYPE html>
<html lang="en">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="shortcut icon" href="/favicon.png" type="image/x-icon">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miss Cal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
</head>
<body>
<!-- Floating Action Buttons -->
<div class="floating-actions">
    <div class="floating-btn" id="darkModeToggle" title="Toggle Dark Mode">
        <i class="fas fa-moon"></i>
    </div>
    <div class="floating-btn" id="scrollTopBtn" title="Back to Top">
        <i class="fas fa-arrow-up"></i>
    </div>
</div>

<!-- Toast notification -->
<div class="toast" id="toast">
    <div class="toast-content">
        <div class="toast-icon">
            <i class="fas fa-info-circle"></i>
        </div>
        <div class="toast-message">This is a notification</div>
    </div>
    <button class="toast-close"><i class="fas fa-times"></i></button>
</div>

<!-- Loader -->
<div class="loader-container" id="loaderContainer">
    <div class="loader"></div>
</div>

<header class="main-header animate__animated animate__fadeIn">
    <div class="container">
        <h1 class="title">Miss Cal</h1>
        <p class="subtitle">Celebrating Beauty, Confidence, and Talent</p>
        <div class="cta-buttons">


            <a href="#leaderboard" class="cta-button secondary-cta"><i class="fas fa-trophy"></i> View Top Leaders</a>
            <a href="sign-in.html" class="cta-button primary-cta"><i class="fas fa-user-plus"></i> Participate TODAY</a>
            <a href="vote.html" class="cta-button secondary-cta"><i class="fas fa-vote-yea"></i> Search for Contestants</a>
        </div>

    </div>
</header>

<nav class="navbar animate__animated animate__fadeInDown">
    <ul>
        <li><a href="#about"><i class="fas fa-info-circle"></i> About</a></li>
        <li><a href="rule.html"><i class="fas fa-gavel"></i> Rules & Privacy</a></li>
        <li><a href="#schedule"><i class="fas fa-calendar-alt"></i> Schedule</a></li>
        <li><a href="#leaderboard"><i class="fas fa-trophy"></i> Leaderboard</a></li>
        <li><a href="sign-in.html"><i class="fas fa-sign-in-alt"></i> Sign In</a></li>
    </ul>
</nav>

<div class="modal" id="emailVoteModal">
    <div class="modal-content">
        <button class="modal-close" id="emailVoteModalClose"><i class="fas fa-times"></i></button>
        <h2 style="color: var(--berkeley-blue); margin-bottom: 20px;">Vote with Your Berkeley Email</h2>
        <p style="margin-bottom: 15px;">No account needed! Enter your UC Berkeley email to vote for this contestant.</p>

        <form id="emailVoteForm" class="email-vote-form">
            <input type="hidden" id="candidateIdInput" name="candidateId">
            <input type="hidden" id="candidateNameInput" name="candidateName">

            <div class="form-group">
                <label for="emailInput">Your Berkeley Email:</label>
                <input type="email" id="emailInput" name="email" placeholder="yourname@berkeley.edu" required>
            </div>

            <div class="form-actions">
                <button type="submit" class="primary-cta">
                    <i class="fas fa-paper-plane"></i> Send Verification Email
                </button>
            </div>
        </form>

        <div id="emailVoteConfirmation" style="display: none; text-align: center; padding: 20px;">
            <i class="fas fa-check-circle" style="color: #28a745; font-size: 3rem; margin-bottom: 15px;"></i>
            <h3 style="margin-bottom: 10px;">Verification Email Sent!</h3>
            <p>Please check your email or Spam and click the verification link to complete your vote.</p>
        </div>
    </div>
</div>

<section id="about" class="about-section">
    <div class="container">
        <h2 class="section-title">About Miss Cal</h2>
        <div class="about-content">
            <div class="about-text">
                <p>Miss Cal is about discovering someone who has the heart and soul of UC Berkeley; someone who, just by entering the room, lights it up with confidence, righteous leadership, and the capacity to uplift all the kindness in the Cal community.</p>
                <p>We are excited to meet someone who is an inspiring peer, serves with honor, and showcases the best qualities of the Cal community. It is not about perfection, it is about showcasing each individual a unique whether that is through experiences, or accomplishments, and even just the own bond that they can create with someone.</p>
                <p>Miss Cal stands for hope, positivity, and the expression of diversity, especially of what it is to be UC Berkeley.</p>
            </div>
            <div class="about-features">
                <div class="feature">
                    <i class="fas fa-star"></i>
                    <h3>Celebrate Talent</h3>
                    <p>Showcase your unique abilities and passions</p>
                </div>
                <div class="feature">
                    <i class="fas fa-users"></i>
                    <h3>Build Community</h3>
                    <p>Connect with fellow Cal students</p>
                </div>
                <div class="feature">
                    <i class="fas fa-award"></i>
                    <h3>Win Recognition</h3>
                    <p>Earn the Miss Cal title and Miss Cal Scholarship</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="schedule" class="schedule-section">
    <div class="container">
        <h2 class="section-title">Event Schedule</h2>
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-date">
                    <span>Phase 1</span>
                    <span class="date">April 1-25</span>
                </div>
                <div class="timeline-content">
                    <h3>Online Voting</h3>
                    <p>Sign up to participate in the Miss Cal pageant. Complete your profile with photo and your amazing story.</p>
                    <p>Student can vote for your choice.</p>
                    <div class="timeline-status active">
                        <span class="status-dot"></span>
                        <span class="status-text">Current Phase</span>
                    </div>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">
                    <span>Phase 2</span>
                    <span class="date">April 25-30</span>
                </div>
                <div class="timeline-content">
                    <h3>Top 20</h3>
                    <p>Top 20 participants can start uploading their personal video on official Miss Cal social media to boost their position</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">
                    <span>Phase 3</span>
                    <span class="date"> We will choose one day during May 1-5</span>
                </div>
                <div class="timeline-content">
                    <h3>Grand Finale</h3>
                    <p>Final showcase and crowning of Miss Cal 2025.</p>
                </div>
            </div>

        </div>
    </div>
</section>

<section id="leaderboard" class="leaderboard-section">
    <div class="container">
        <h2 class="section-title">Top 20 Leaders</h2>
        <p class="section-subtitle">Our top 20 contestants by vote count. Sign in to vote for your favorite!</p>

        <div class="leaderboard-container">
            <div class="leaderboard-header">
                <span class="rank-header">Rank</span>
                <span class="name-header">Contestant</span>
                <span class="votes-header">Votes</span>
                <span class="action-header">Action</span>
            </div>
            <div id="leaderboardList" class="leaderboard-list">
                <!-- Leaderboard items will be loaded here -->
                <div class="loader" id="leaderboardLoader"></div>
            </div>
        </div>
    </div>
</section>

<section class="cta-section">
    <div class="container">
        <h2>Ready to be the next Miss Cal?</h2>
        <p>Join now and become part of this exciting journey!</p>
        <div class="cta-buttons">
            <a href="sign-in.html" class="cta-button primary-cta"><i class="fas fa-user-plus"></i> Sign Up Now</a>
            <a href="vote.html" class="cta-button secondary-cta"><i class="fas fa-vote-yea"></i> Search for Contestants</a>
        </div>
        <div class="countdown-container">
            <p>Registration closes in:</p>
            <div id="countdown" class="countdown">
                <div class="countdown-item">
                    <span id="days">00</span>
                    <span>Days</span>
                </div>
                <div class="countdown-item">
                    <span id="hours">00</span>
                    <span>Hours</span>
                </div>
                <div class="countdown-item">
                    <span id="minutes">00</span>
                    <span>Minutes</span>
                </div>
                <div class="countdown-item">
                    <span id="seconds">00</span>
                    <span>Seconds</span>
                </div>
            </div>
        </div>
    </div>
</section>

<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-brand">
                <h3>Miss Cal</h3>
                <p>Celebrating the spirit of UC Berkeley</p>
            </div>
            <div class="footer-links">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="#about">About</a></li>
                    <li><a href="rule.html">Rules</a></li>
                    <li><a href="#schedule">Schedule</a></li>
                    <li><a href="#leaderboard">Leaderboard</a></li>
                </ul>
            </div>
            <div class="footer-contact">
                <h4>Contact Us</h4>
                <p><i class="fas fa-envelope"></i> info@misscal.com</p>
                <div class="social-icons">
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Miss Cal. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Student Profile Modal -->
<div class="modal" id="profileModal">
    <div class="modal-content">
        <button class="modal-close" id="modalClose"><i class="fas fa-times"></i></button>
        <div id="profileContent">
            <!-- Student profile content will be loaded here -->
        </div>
    </div>
</div>

<style>
    :root {
        --berkeley-blue: #003262;
        --california-gold: #FDB515;
        --accent-pink: #ff6f61;
        --accent-pink-hover: #ff4a3a;
        --light-gray: #f4f4f4;
        --white: #ffffff;
        --dark: #333333;
        --text-color: #444444;
        --transition-speed: 0.3s;
    }

    /* Reset */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--text-color);
        background-color: #f9f9f9;
        overflow-x: hidden;
        transition: background-color var(--transition-speed), color var(--transition-speed);
        scroll-behavior: smooth;
    }

    body.dark-mode {
        background-color: #222;
        color: #f0f0f0;
    }

    .container {
        width: 90%;
        margin: auto;
        max-width: 1200px;
    }

    /* Header */
    .main-header {
        background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('CalPic.jpg') no-repeat center center/cover;
        color: white;
        text-align: center;
        padding: 150px 20px;
        position: relative;
    }

    .main-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 50, 98, 0.3);
        z-index: 1;
    }

    .main-header .container {
        position: relative;
        z-index: 2;
    }

    .main-header .title {
        font-family: 'Dancing Script', cursive;
        font-size: 6rem;
        margin-bottom: 15px;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
    }

    .main-header .subtitle {
        font-size: 1.5rem;
        margin-bottom: 30px;
        text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.5);
    }

    .cta-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
    }

    .cta-button {
        display: inline-block;
        padding: 12px 25px;
        text-decoration: none;
        border-radius: 30px;
        font-weight: bold;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        min-width: 180px;
    }

    .primary-cta {
        background: var(--accent-pink);
        color: white;
        box-shadow: 0 4px 15px rgba(255, 111, 97, 0.3);
    }

    .primary-cta:hover {
        background: var(--accent-pink-hover);
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(255, 111, 97, 0.4);
    }

    .secondary-cta {
        background: var(--california-gold);
        color: var(--berkeley-blue);
        box-shadow: 0 4px 15px rgba(253, 181, 21, 0.3);
    }

    .secondary-cta:hover {
        background: #e9a812;
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(253, 181, 21, 0.4);
    }

    /* Navbar */
    .navbar {
        background: var(--berkeley-blue);
        color: white;
        padding: 15px 0;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    body.dark-mode .navbar {
        background: #1a1a1a;
    }

    .navbar ul {
        list-style: none;
        padding: 0;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
    }

    .navbar ul li {
        margin: 0 5px;
    }

    .navbar ul li a {
        color: white;
        text-decoration: none;
        padding: 8px 15px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        gap: 5px;
        transition: all 0.3s ease;
    }

    .navbar ul li a:hover {
        background: var(--california-gold);
        color: var(--berkeley-blue);
    }

    /* Section Styles */
    section {
        padding: 80px 0;
        transition: all 0.3s ease;
    }

    body.dark-mode section {
        background: #222;
    }

    .section-title {
        font-size: 2.5rem;
        text-align: center;
        margin-bottom: 20px;
        color: var(--berkeley-blue);
        position: relative;
        padding-bottom: 15px;
    }

    body.dark-mode .section-title {
        color: var(--california-gold);
    }

    .section-title::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background: var(--california-gold);
        border-radius: 2px;
    }

    .section-subtitle {
        text-align: center;
        font-size: 1.1rem;
        color: #666;
        margin-bottom: 40px;
    }

    body.dark-mode .section-subtitle {
        color: #ccc;
    }

    /* About Section */
    .about-section {
        background: #fff;
    }

    body.dark-mode .about-section {
        background: #2a2a2a;
    }

    .about-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        align-items: center;
    }

    .about-text p {
        margin-bottom: 20px;
        font-size: 1.1rem;
        line-height: 1.8;
    }

    .about-features {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
    }

    .feature {
        background: var(--light-gray);
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }

    body.dark-mode .feature {
        background: #444;
    }

    .feature:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .feature i {
        font-size: 2rem;
        color: var(--california-gold);
        margin-bottom: 15px;
    }

    .feature h3 {
        font-size: 1.2rem;
        margin-bottom: 10px;
        color: var(--berkeley-blue);
    }

    body.dark-mode .feature h3 {
        color: var(--california-gold);
    }

    /* Schedule Section */
    .schedule-section {
        background: var(--light-gray);
    }

    body.dark-mode .schedule-section {
        background: #2d2d2d;
    }

    .timeline {
        position: relative;
        max-width: 800px;
        margin: 0 auto;
    }

    .timeline::before {
        content: '';
        position: absolute;
        left: 50px;
        top: 0;
        height: 100%;
        width: 3px;
        background: var(--california-gold);
    }

    .timeline-item {
        display: flex;
        margin-bottom: 40px;
        position: relative;
    }

    .timeline-date {
        width: 100px;
        text-align: right;
        padding-right: 30px;
        display: flex;
        flex-direction: column;
        gap: 5px;
    }

    .timeline-date span:first-child {
        font-weight: bold;
        color: var(--berkeley-blue);
    }

    body.dark-mode .timeline-date span:first-child {
        color: var(--california-gold);
    }

    .timeline-date .date {
        font-size: 0.9rem;
        color: #777;
    }

    body.dark-mode .timeline-date .date {
        color: #bbb;
    }

    .timeline-content {
        flex: 1;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        position: relative;
    }

    body.dark-mode .timeline-content {
        background: #444;
    }

    .timeline-content::before {
        content: '';
        position: absolute;
        top: 20px;
        left: -8px;
        width: 16px;
        height: 16px;
        background: var(--california-gold);
        border-radius: 50%;
    }

    .timeline-content h3 {
        margin-bottom: 10px;
        color: var(--berkeley-blue);
    }

    body.dark-mode .timeline-content h3 {
        color: var(--california-gold);
    }

    .timeline-status {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 10px;
        color: #777;
    }

    .timeline-status.active {
        color: #28a745;
    }

    .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #777;
    }

    .timeline-status.active .status-dot {
        background: #28a745;
    }

    /* Leaderboard Section */
    .leaderboard-section {
        background: #fff;
        padding-bottom: 100px;
    }

    body.dark-mode .leaderboard-section {
        background: #2a2a2a;
    }

    .leaderboard-filter {
        display: flex;
        justify-content: center;
        margin-bottom: 25px;
        gap: 10px;
        flex-wrap: wrap;
    }

    .filter-button {
        padding: 8px 16px;
        background: #f0f0f0;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    body.dark-mode .filter-button {
        background: #444;
        color: #f0f0f0;
    }

    .filter-button:hover {
        background: #e0e0e0;
    }

    body.dark-mode .filter-button:hover {
        background: #555;
    }

    .filter-button.active {
        background: var(--berkeley-blue);
        color: white;
    }

    .leaderboard-container {
        background: white;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        overflow: hidden;
    }

    body.dark-mode .leaderboard-container {
        background: #444;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }

    .leaderboard-header {
        display: grid;
        grid-template-columns: 80px 1fr 100px 120px;
        padding: 15px 20px;
        background: var(--berkeley-blue);
        color: white;
        font-weight: bold;
    }

    body.dark-mode .leaderboard-header {
        background: #333;
    }

    .leaderboard-list {
        max-height: 600px;
        overflow-y: auto;
        position: relative;
    }

    .leaderboard-item {
        display: grid;
        grid-template-columns: 80px 1fr 100px 120px;
        padding: 15px 20px;
        align-items: center;
        border-bottom: 1px solid #eee;
        transition: all 0.3s ease;
    }

    body.dark-mode .leaderboard-item {
        border-bottom-color: #555;
    }

    .leaderboard-item:hover {
        background: #f9f9f9;
    }

    body.dark-mode .leaderboard-item:hover {
        background: #555;
    }

    .rank {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        color: white;
        font-weight: bold;
    }

    .rank-1 {
        background: linear-gradient(45deg, #FFD700, #FFA500);
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    .rank-2 {
        background: linear-gradient(45deg, #C0C0C0, #A9A9A9);
        box-shadow: 0 0 10px rgba(192, 192, 192, 0.5);
    }

    .rank-3 {
        background: linear-gradient(45deg, #CD7F32, #8B4513);
        box-shadow: 0 0 10px rgba(205, 127, 50, 0.5);
    }

    .rank-other {
        background: var(--berkeley-blue);
    }

    .contestant {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .contestant-img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--california-gold);
    }

    .contestant-info {
        text-align: left;
    }

    .contestant-name {
        font-weight: bold;
        color: var(--berkeley-blue);
    }

    body.dark-mode .contestant-name {
        color: var(--california-gold);
    }

    .contestant-major {
        font-size: 0.9rem;
        color: #777;
    }

    body.dark-mode .contestant-major {
        color: #bbb;
    }

    .votes {
        font-weight: bold;
    }

    .vote-btn {
        background: var(--accent-pink);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
        transition: all 0.3s ease;
    }

    .vote-btn:hover {
        background: var(--accent-pink-hover);
        transform: translateY(-3px);
    }

    .leaderboard-footer {
        text-align: center;
        margin-top: 30px;
    }

    .view-all-btn {
        display: inline-block;
        background: var(--california-gold);
        color: var(--berkeley-blue);
        padding: 10px 20px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        width: fit-content;
        margin: 0 auto;
    }

    .view-all-btn:hover {
        background: #e9a812;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    /* CTA Section */
    .cta-section {
        background: linear-gradient(rgba(0, 50, 98, 0.9), rgba(0, 50, 98, 0.9)), url('CalPic.jpg') center/cover;
        color: white;
        text-align: center;
        padding: 100px 0;
    }

    .cta-section h2 {
        font-size: 2.5rem;
        margin-bottom: 15px;
    }

    .cta-section p {
        font-size: 1.2rem;
        margin-bottom: 30px;
    }

    .countdown-container {
        margin-top: 40px;
    }

    .countdown-container p {
        margin-bottom: 15px;
    }

    .countdown {
        display: flex;
        justify-content: center;
        gap: 15px;
    }

    .countdown-item {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        padding: 15px;
        min-width: 80px;
        text-align: center;
    }

    .countdown-item span:first-child {
        font-size: 2rem;
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
    }

    /* Footer */
    .footer {
        background: var(--berkeley-blue);
        color: white;
        padding: 60px 0 20px;
    }

    .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 40px;
        margin-bottom: 40px;
    }

    .footer-brand h3 {
        font-size: 1.8rem;
        margin-bottom: 10px;
    }

    .footer-links h4, .footer-contact h4 {
        font-size: 1.2rem;
        margin-bottom: 15px;
        color: var(--california-gold);
    }

    .footer-links ul {
        list-style: none;
    }

    .footer-links ul li {
        margin-bottom: 10px;
    }

    .footer-links ul li a {
        color: #ccc;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .footer-links ul li a:hover {
        color: var(--california-gold);
    }

    .footer-contact p {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
    }

    .social-icons {
        display: flex;
        gap: 10px;
        margin-top: 15px;
    }

    .social-icon {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        color: white;
        transition: all 0.3s ease;
    }

    .social-icon:hover {
        background: var(--california-gold);
        color: var(--berkeley-blue);
        transform: translateY(-3px);
    }

    .footer-bottom {
        text-align: center;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Floating Action Buttons */
    .floating-actions {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        z-index: 999;
    }

    .floating-btn {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--berkeley-blue);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transition: all var(--transition-speed);
        font-size: 1.2rem;
    }

    .floating-btn:hover {
        background: var(--california-gold);
        color: var(--berkeley-blue);
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
    }

    /* Toast notification */
    .toast {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: var(--berkeley-blue);
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: space-between;
        z-index: 1000;
        opacity: 0;
        transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        max-width: 350px;
    }

    .toast.show {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
    }

    .toast-content {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .toast-icon {
        font-size: 1.5rem;
    }

    .toast-close {
        background: transparent;
        border: none;
        color: white;
        font-size: 1.2rem;
        cursor: pointer;
        transition: all 0.3s;
        padding: 0;
        margin-left: 15px;
    }

    .toast-close:hover {
        transform: scale(1.2);
    }

    .toast.success {
        background: #28a745;
    }

    .toast.error {
        background: #dc3545;
    }

    .toast.info {
        background: var(--berkeley-blue);
    }

    /* Loader */
    .loader-container {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        justify-content: center;
        align-items: center;
    }

    .loader {
        width: 50px;
        height: 50px;
        border: 5px solid var(--california-gold);
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* Profile Modal */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1500;
        justify-content: center;
        align-items: center;
        overflow-y: auto;
    }

    .modal-content {
        background-color: white;
        width: 80%;
        max-width: 600px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        position: relative;
        padding: 30px;
        margin: 50px auto;
        transition: all 0.3s ease;
        animation: modal-fade-in 0.3s;
    }

    body.dark-mode .modal-content {
        background-color: #333;
        color: #f0f0f0;
    }

    @keyframes modal-fade-in {
        from { opacity: 0; transform: translateY(-50px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .modal-close {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 1.5rem;
        color: #777;
        cursor: pointer;
        transition: all 0.3s;
        background: none;
        border: none;
        z-index: 2;
    }

    .modal-close:hover {
        color: var(--berkeley-blue);
        transform: rotate(90deg);
    }

    body.dark-mode .modal-close:hover {
        color: var(--california-gold);
    }

    /* Profile content styling */
    .profile-header {
        display: flex;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid #eee;
    }

    body.dark-mode .profile-header {
        border-bottom-color: #555;
    }

    .profile-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        overflow: hidden;
        margin-right: 25px;
        border: 4px solid var(--california-gold);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        flex-shrink: 0;
    }

    .profile-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .profile-title {
        flex: 1;
    }

    .profile-name {
        font-size: 2rem;
        margin: 0 0 5px 0;
        color: var(--berkeley-blue);
    }

    body.dark-mode .profile-name {
        color: var(--california-gold);
    }

    .profile-subtitle {
        font-size: 1.1rem;
        color: #777;
        margin: 0;
    }

    body.dark-mode .profile-subtitle {
        color: #bbb;
    }

    .profile-badge {
        display: inline-block;
        background: var(--california-gold);
        color: var(--berkeley-blue);
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.9rem;
        margin-top: 10px;
    }

    .profile-sections {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
    }

    @media (max-width: 768px) {
        .profile-sections {
            grid-template-columns: 1fr;
        }

        .profile-header {
            flex-direction: column;
            text-align: center;
        }

        .profile-avatar {
            margin-right: 0;
            margin-bottom: 15px;
        }
    }

    .profile-section {
        background: #f9f9f9;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        text-align: left;
    }

    body.dark-mode .profile-section {
        background: #444;
    }

    .section-title {
        color: var(--berkeley-blue);
        margin-top: 0;
        font-size: 1.2rem;
        margin-bottom: 15px;
        position: relative;
        display: inline-block;
    }

    body.dark-mode .section-title {
        color: var(--california-gold);
    }

    .section-title::after {
        content: '';
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--california-gold);
    }

    .info-item {
        margin-bottom: 15px;
        display: flex;
        align-items: flex-start;
    }

    .info-item i {
        margin-right: 10px;
        color: var(--berkeley-blue);
        font-size: 1.1rem;
        margin-top: 3px;
    }

    body.dark-mode .info-item i {
        color: var(--california-gold);
    }

    .info-content {
        flex: 1;
    }

    .info-label {
        font-weight: bold;
        margin-bottom: 3px;
        color: #555;
        font-size: 0.9rem;
    }

    body.dark-mode .info-label {
        color: #ddd;
    }

    .info-value {
        line-height: 1.5;
        color: #333;
    }

    body.dark-mode .info-value {
        color: #f0f0f0;
    }

    .profile-actions {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 30px;
    }

    .profile-action-btn {
        background: var(--berkeley-blue);
        color: white;
        border: none;
        border-radius: 25px;
        padding: 10px 20px;
        font-weight: bold;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
    }

        .profile-action-btn:hover {
            background: var(--california-gold);
            color: var(--berkeley-blue);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .about-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .main-header .title {
                font-size: 4rem;
            }
        }

        @media (max-width: 768px) {
            section {
                padding: 60px 0;
            }

            .leaderboard-header, .leaderboard-item {
                grid-template-columns: 60px 1fr 80px 100px;
                padding: 12px 15px;
                font-size: 0.9rem;
            }

            .main-header {
                padding: 100px 20px;
            }

            .main-header .title {
                font-size: 3rem;
            }

            .rank {
                width: 35px;
                height: 35px;
            }

            .contestant-img {
                width: 40px;
                height: 40px;
            }

            .contestant-info {
                font-size: 0.9rem;
            }

            .vote-btn {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 576px) {
            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .leaderboard-header, .leaderboard-item {
                grid-template-columns: 50px 1fr 70px;
            }

            .action-header, .leaderboard-item > .vote-btn {
                display: none;
            }

            .contestant {
                flex-direction: column;
                text-align: center;
                gap: 8px;
            }

            .contestant-img {
                margin: 0 auto;
            }

            .contestant-info {
                text-align: center;
            }

            .countdown {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    .login-prompt {
        background: var(--berkeley-blue);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
        transition: all 0.3s ease;
    }

    .login-prompt:hover {
        background: var(--california-gold);
        color: var(--berkeley-blue);
        transform: translateY(-3px);
    }
    .email-vote-form {
        padding: 15px 0;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
        color: var(--berkeley-blue);
    }

    body.dark-mode .form-group label {
        color: var(--california-gold);
    }

    .form-group input {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s;
    }

    .form-group input:focus {
        border-color: var(--berkeley-blue);
        outline: none;
        box-shadow: 0 0 0 3px rgba(0, 50, 98, 0.2);
    }

    body.dark-mode .form-group input {
        background: #444;
        border-color: #555;
        color: #f0f0f0;
    }

    body.dark-mode .form-group input:focus {
        border-color: var(--california-gold);
        box-shadow: 0 0 0 3px rgba(253, 181, 21, 0.2);
    }

    .form-actions {
        display: flex;
        justify-content: center;
        margin-top: 25px;
    }
    .profile-view-btn {
        background: transparent;
        border: 1px solid var(--berkeley-blue);
        color: var(--berkeley-blue);
        border-radius: 15px;
        padding: 3px 8px;
        font-size: 0.8rem;
        margin-top: 5px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .profile-view-btn:hover {
        background: var(--berkeley-blue);
        color: white;
    }

    body.dark-mode .profile-view-btn {
        border-color: var(--california-gold);
        color: var(--california-gold);
    }

    body.dark-mode .profile-view-btn:hover {
        background: var(--california-gold);
        color: var(--berkeley-blue);
    }
    .view-profile-btn {
        background: var(--berkeley-blue);
        color: white;
        border: none;
        border-radius: 15px;
        padding: 5px 10px;
        font-size: 0.8rem;
        margin-top: 5px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .view-profile-btn:hover {
        background: var(--california-gold);
        color: var(--berkeley-blue);
    }
    /* Improved Profile Modal Styling */
    .modal-content {
        background-color: white;
        width: 90%;
        max-width: 800px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        position: relative;
        padding: 0;
        margin: 50px auto;
        overflow: hidden;
    }

    .profile-container {
        display: flex;
        flex-direction: column;
    }

    .profile-header {
        background: linear-gradient(to right, var(--berkeley-blue), #1a4d80);
        color: white;
        padding: 30px;
        display: flex;
        align-items: center;
        gap: 25px;
    }

    .profile-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        overflow: hidden;
        border: 4px solid var(--california-gold);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        flex-shrink: 0;
        background: white;
    }

    .profile-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .profile-title {
        flex: 1;
    }

    .profile-name {
        font-size: 2.2rem;
        margin: 0 0 5px 0;
        color: white;
    }

    .profile-subtitle {
        font-size: 1.1rem;
        color: rgba(255, 255, 255, 0.9);
        margin: 0 0 5px 0;
    }

    .votes-badge {
        display: inline-block;
        background: var(--california-gold);
        color: var(--berkeley-blue);
        font-weight: bold;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.95rem;
        margin-top: 12px;
    }

    .profile-tabs {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        padding: 30px;
        background: #f9f9f9;
    }

    .profile-section {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
        height: 100%;
    }

    .section-heading {
        background: var(--berkeley-blue);
        color: white;
        margin: 0;
        padding: 12px 20px;
        font-size: 1.2rem;
        border-bottom: 3px solid var(--california-gold);
    }

    .section-content {
        padding: 15px 20px;
        min-height: 100px;
    }

    .section-content p {
        line-height: 1.6;
        color: #333;
    }

    .profile-footer {
        padding: 25px 30px;
        border-top: 1px solid #eee;
        text-align: center;
    }

    .connect-heading {
        color: var(--berkeley-blue);
        font-size: 1.3rem;
        margin-bottom: 15px;
    }

    .social-links {
        display: flex;
        justify-content: center;
        gap: 15px;
    }

    .social-icon {
        width: 45px;
        height: 45px;
        background: var(--berkeley-blue);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.4rem;
        transition: all 0.3s ease;
    }

    .social-icon:hover {
        background: var(--california-gold);
        color: var(--berkeley-blue);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 1.6rem;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
        background: none;
        border: none;
        z-index: 10;
        opacity: 0.8;
    }

    .modal-close:hover {
        color: var(--california-gold);
        transform: rotate(90deg);
        opacity: 1;
    }

    /* Responsive design for mobile */
    @media (max-width: 768px) {
        .profile-header {
            flex-direction: column;
            text-align: center;
            padding: 25px 15px;
        }

        .profile-avatar {
            margin-bottom: 15px;
        }

        .profile-tabs {
            grid-template-columns: 1fr;
            padding: 20px 15px;
        }

        .modal-content {
            width: 95%;
            margin: 40px auto;
        }
    }
    </style>
<script>
    function voteForContestant(contestantId) {
        // Check if user is logged in
        if (!isUserLoggedIn()) {
            // If not logged in, redirect to sign-in page
            window.location.href = '/sign-in.html';
            return;
        }

        // Show loading indicator or disable button
        const voteBtn = event.target.closest('.vote-btn');
        if (voteBtn) {
            voteBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Voting...';
            voteBtn.disabled = true;
        }

        // Send vote to server
        fetch('https://server1.misscal.net/vote', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include',
            body: JSON.stringify({ candidateId: contestantId })
        })
            .then(response => {
                // Store the response status first
                const isSuccess = response.ok;
                return response.json().then(data => {
                    // Return both the data and the success status
                    return { data, isSuccess };
                });
            })
            .then(({ data, isSuccess }) => {
                // Reset button
                if (voteBtn) {
                    voteBtn.innerHTML = '<i class="fas fa-heart"></i> Vote';
                    voteBtn.disabled = false;
                }

                if (data.message) {
                    showToast(data.message, isSuccess ? 'success' : 'error');
                } else {
                    showToast(isSuccess ? 'Vote successful!' : 'Failed to vote', isSuccess ? 'success' : 'error');
                }

                // Reload leaderboard to show updated votes
                if (isSuccess) {
                    setTimeout(() => {
                        loadLeaderboard();
                    }, 1000);
                }
            })
            .catch(error => {
                console.error('Error voting:', error);
                // Reset button
                if (voteBtn) {
                    voteBtn.innerHTML = '<i class="fas fa-heart"></i> Vote';
                    voteBtn.disabled = false;
                }
                showToast('An error occurred while voting', 'error');
            });
    }
    function isUserLoggedIn() {
        // Check for user_id cookie
        return !!getCookieValue("user_id");
    }

    // Function to get cookie value
    function getCookieValue(name) {
        const cookies = document.cookie.split(";");
        for (let c of cookies) {
            c = c.trim();
            if (c.startsWith(name + "=")) {
                return c.substring(name.length + 1, c.length);
            }
        }
        return null;
    }
    // Add JavaScript for interactive elements

    // Get DOM elements
    const darkModeToggle = document.getElementById("darkModeToggle");
    const scrollTopBtn = document.getElementById("scrollTopBtn");
    const toast = document.getElementById("toast");
    const toastClose = document.querySelector(".toast-close");
    const toastMessage = document.querySelector(".toast-message");
    const toastIcon = document.querySelector(".toast-icon i");
    const loaderContainer = document.getElementById("loaderContainer");
    const leaderboardList = document.getElementById("leaderboardList");
    const leaderboardLoader = document.getElementById("leaderboardLoader");
    const profileModal = document.getElementById("profileModal");
    const modalClose = document.getElementById("modalClose");
    const profileContent = document.getElementById("profileContent");
    const filterButtons = document.querySelectorAll('.filter-button');
    const emailVoteModal = document.getElementById("emailVoteModal");
    const emailVoteModalClose = document.getElementById("emailVoteModalClose");
    const emailVoteForm = document.getElementById("emailVoteForm");
    const emailVoteConfirmation = document.getElementById("emailVoteConfirmation");
    const candidateIdInput = document.getElementById("candidateIdInput");
    const candidateNameInput = document.getElementById("candidateNameInput");


    // Dark mode toggle
    darkModeToggle.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");

        // Update icon
        if (document.body.classList.contains("dark-mode")) {
            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            localStorage.setItem("darkMode", "enabled");
        } else {
            darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            localStorage.setItem("darkMode", "disabled");
        }
    });

    // Check for saved dark mode preference
    if (localStorage.getItem("darkMode") === "enabled") {
        document.body.classList.add("dark-mode");
        darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    }

    // Scroll to top
    scrollTopBtn.addEventListener("click", () => {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        });
    });

    // Toast notification function
    function showToast(message, type = "info") {
        toastMessage.textContent = message;
        toast.className = "toast";
        toast.classList.add(type);
        toast.classList.add("show");

        // Update icon based on type
        if (type === "success") {
            toastIcon.className = "fas fa-check-circle";
        } else if (type === "error") {
            toastIcon.className = "fas fa-exclamation-circle";
        } else {
            toastIcon.className = "fas fa-info-circle";
        }

        // Auto hide after 5 seconds
        setTimeout(() => {
            toast.classList.remove("show");
        }, 5000);
    }

    // Close toast manually
    toastClose.addEventListener("click", () => {
        toast.classList.remove("show");
    });

    // Profile modal functions
    function openProfileModal() {
        profileModal.style.display = "flex";
        document.body.style.overflow = "hidden"; // Prevent scrolling behind modal
    }

    function closeProfileModal() {
        profileModal.style.display = "none";
        document.body.style.overflow = ""; // Restore scrolling
    }

    // Close modal on click
    modalClose.addEventListener("click", closeProfileModal);

    // Close modal when clicking outside content
    profileModal.addEventListener("click", (e) => {
        if (e.target === profileModal) {
            closeProfileModal();
        }
    });

    // Close modal with Escape key
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
            closeProfileModal();
        }
    });

    // Filter functionality for leaderboard
    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Remove active class from all buttons
            filterButtons.forEach(btn => btn.classList.remove('active'));

            // Add active class to clicked button
            button.classList.add('active');

            // Get filter value
            const filter = button.getAttribute('data-filter');

            // Apply filter - in a real app, this would reload the leaderboard
            showToast(`Filtering by ${filter}`, 'info');

            // Here you would reload the leaderboard based on the filter
            loadLeaderboard(filter);
        });
    });

    // Load leaderboard data from API
    async function loadLeaderboard() {
        // Show loader
        leaderboardList.innerHTML = '<div class="loader"></div>';

        try {
            // Fetch data from the API endpoint - remove credentials for non-logged in users to view
            const response = await fetch("/api/getTop20Leaderboard");

            const data = await response.json();

            // Clear loader
            leaderboardList.innerHTML = '';

            // Display data
            if (data.length === 0) {
                leaderboardList.innerHTML = '<div class="no-results">No contestants found</div>';
                return;
            }

            // Check if user is logged in
            const userLoggedIn = isUserLoggedIn();

            // Show top contestants
            for (let i = 0; i < data.length; i++) {
                const contestant = data[i];
                const item = document.createElement('div');
                item.className = 'leaderboard-item';

                // Determine rank class
                let rankClass = 'rank-other';
                if (i === 0) rankClass = 'rank-1';
                else if (i === 1) rankClass = 'rank-2';
                else if (i === 2) rankClass = 'rank-3';

                // Create button HTML based on login status
                let buttonHtml = '';
                if (userLoggedIn) {
                    buttonHtml = `
                <button class="vote-btn" onclick="voteForContestant('${contestant.user_id}')">
                    <i class="fas fa-heart"></i> Vote
                </button>`;
                } else {
                    buttonHtml = `
                <button class="login-prompt" onclick="window.location.href='/sign-in.html'">
                    <i class="fas fa-sign-in-alt"></i> Sign in to Vote
                </button>`;
                }

                item.innerHTML = `
            <div class="rank ${rankClass}">${i + 1}</div>
            <div class="contestant" onclick="showStudentProfile('${contestant.id}')">
                <img src="${contestant.photo}" alt="${contestant.name}" class="contestant-img">
                <div class="contestant-info">
                    <div class="contestant-name">${contestant.name}</div>
                </div>
            </div>
            <div class="votes">${contestant.votes}</div>
            ${buttonHtml}
            `;

                leaderboardList.appendChild(item);
            }

        } catch (error) {
            console.error('Error loading leaderboard:', error);
            leaderboardList.innerHTML = '<div class="error-message">Failed to load leaderboard</div>';
            showToast('Failed to load leaderboard', 'error');
        }
    }

    // Countdown timer functionality
    function updateCountdown() {
        // Set the target date (example: March 15, 2025)
        const targetDate = new Date('2025-04-30T23:59:59').getTime();
        const now = new Date().getTime();
        const timeLeft = targetDate - now;

        if (timeLeft <= 0) {
            document.getElementById('days').innerText = '00';
            document.getElementById('hours').innerText = '00';
            document.getElementById('minutes').innerText = '00';
            document.getElementById('seconds').innerText = '00';
            return;
        }

        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        document.getElementById('days').innerText = days.toString().padStart(2, '0');
        document.getElementById('hours').innerText = hours.toString().padStart(2, '0');
        document.getElementById('minutes').innerText = minutes.toString().padStart(2, '0');
        document.getElementById('seconds').innerText = seconds.toString().padStart(2, '0');
    }

    // Smooth scroll for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();

            const targetId = this.getAttribute('href');
            if (targetId === '#') return;

            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Mock data for demo purposes

    // Add this function to display the student profile
    // New function to show student profile from the leaderboard
    function showStudentProfile(userId) {
        // Show loader
        document.getElementById('loaderContainer').style.display = 'flex';

        // Use the public endpoint
        fetch(`/api/getPublicStudentProfile?userId=${userId}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to load profile');
                }
                return response.json();
            })
            .then(student => {
                // Hide loader
                document.getElementById('loaderContainer').style.display = 'none';

                // Format photo URL if it exists
                let photoHtml = '';
                if (student.photo) {
                    photoHtml = `
                    <div class="profile-avatar">
                        <img src="https://server1.misscal.net/${student.photo}" alt="${student.name}">
                    </div>`;
                }

                // Build social media links if they exist
                let socialLinks = '';
                if (student.instagram) socialLinks += `<a href="https://instagram.com/${student.instagram}" target="_blank" class="social-icon"><i class="fab fa-instagram"></i></a>`;
                if (student.linkedin) socialLinks += `<a href="${student.linkedin}" target="_blank" class="social-icon"><i class="fab fa-linkedin"></i></a>`;
                if (student.facebook) socialLinks += `<a href="${student.facebook}" target="_blank" class="social-icon"><i class="fab fa-facebook"></i></a>`;
                if (student.github) socialLinks += `<a href="https://github.com/${student.github}" target="_blank" class="social-icon"><i class="fab fa-github"></i></a>`;
                if (student.tiktok) socialLinks += `<a href="https://tiktok.com/@${student.tiktok}" target="_blank" class="social-icon"><i class="fab fa-tiktok"></i></a>`;

                // Create the profile modal content with improved styling
                const profileHTML = `
                <div class="profile-container">
                    <div class="profile-header">
                        ${photoHtml}
                        <div class="profile-title">
                            <h2 class="profile-name">${student.name || 'Unnamed Contestant'}</h2>
                            <p class="profile-subtitle">${student.major || ''} ${student.year ? '- Year ' + student.year : ''}</p>
                            ${student.gpa ? `<p class="profile-subtitle">GPA: ${student.gpa}</p>` : ''}
                            <div class="votes-badge">Votes: ${student.votes || 0}</div>
                        </div>
                    </div>

                    <div class="profile-tabs">
                        <div class="profile-section">
                            <h3 class="section-heading">Campaign Line</h3>
                            <div class="section-content">
                                <p>${student.campaign_line || 'No campaign line provided'}</p>
                            </div>
                        </div>

                        <div class="profile-section">
                            <h3 class="section-heading">Personal Story</h3>
                            <div class="section-content">
                                <p>${student.personal_story || 'No personal story provided'}</p>
                            </div>
                        </div>

                        <div class="profile-section">
                            <h3 class="section-heading">Experience</h3>
                            <div class="section-content">
                                <p>${student.experience || 'No experience information provided'}</p>
                            </div>
                        </div>

                        <div class="profile-section">
                            <h3 class="section-heading">Organizations</h3>
                            <div class="section-content">
                                <p>${student.organizations || 'No organizations listed'}</p>
                            </div>
                        </div>
                    </div>

                    ${socialLinks ? `
                    <div class="profile-footer">
                        <h3 class="connect-heading">Connect With ${student.name}</h3>
                        <div class="social-links">${socialLinks}</div>
                    </div>` : ''}
                </div>
            `;

                // Set content and show modal
                document.getElementById('profileContent').innerHTML = profileHTML;
                openProfileModal();
            })
            .catch(error => {
                console.error('Error loading student profile:', error);
                document.getElementById('loaderContainer').style.display = 'none';
                showToast('Failed to load student profile', 'error');
            });
    }

    function updateVoteButtonFunctionality() {
        // Update loadLeaderboard function to support email voting
        window.loadLeaderboard = async function() {
            // Show loader
            leaderboardList.innerHTML = '<div class="loader"></div>';

            try {
                // Fetch data from the API endpoint
                const response = await fetch("api/getTop20Leaderboard");
                const data = await response.json();

                // Clear loader
                leaderboardList.innerHTML = '';

                // Display data
                if (data.length === 0) {
                    leaderboardList.innerHTML = '<div class="no-results">No contestants found</div>';
                    return;
                }

                // Check if user is logged in
                const userLoggedIn = isUserLoggedIn();

                // Show top contestants
                for (let i = 0; i < data.length; i++) {
                    const contestant = data[i];
                    const item = document.createElement('div');
                    item.className = 'leaderboard-item';

                    // Determine rank class
                    let rankClass = 'rank-other';
                    if (i === 0) rankClass = 'rank-1';
                    else if (i === 1) rankClass = 'rank-2';
                    else if (i === 2) rankClass = 'rank-3';

                    // Enhanced button HTML with email voting option
                    let buttonHtml = '';
                    if (userLoggedIn) {
                        // Logged in users can vote directly
                        buttonHtml = `
                    <button class="vote-btn" onclick="voteForContestant('${contestant.user_id}')">
                        <i class="fas fa-heart"></i> Vote
                    </button>`;
                    } else {
                        // Not logged in users get a dropdown with options
                        buttonHtml = `
                    <div class="vote-options">
                        <button class="vote-btn" onclick="openEmailVoteModal('${contestant.user_id}', '${contestant.name}')">
                            <i class="fas fa-envelope"></i> Vote by Email
                        </button>
                    </div>`;
                    }

                    // Updated item.innerHTML with a View Profile button:
                    item.innerHTML = `
    <div class="rank ${rankClass}">${i + 1}</div>
    <div class="contestant">
        <img src="${contestant.photo}" alt="${contestant.name}" class="contestant-img">
        <div class="contestant-info">
            <div class="contestant-name">${contestant.name}</div>
            <button class="view-profile-btn" onclick="showStudentProfile('${contestant.user_id}')">View Profile</button>
        </div>
    </div>
    <div class="votes">${contestant.votes}</div>
    ${buttonHtml}
`;

                    leaderboardList.appendChild(item);
                }

            } catch (error) {
                console.error('Error loading leaderboard:', error);
                leaderboardList.innerHTML = '<div class="error-message">Failed to load leaderboard</div>';
                showToast('Failed to load leaderboard', 'error');
            }
        };
    }

    // Initialize email voting functionality after DOM is loaded
    document.addEventListener('DOMContentLoaded', updateVoteButtonFunctionality);

    function openEmailVoteModal(candidateId, candidateName) {
        candidateIdInput.value = candidateId;
        candidateNameInput.value = candidateName;
        emailVoteForm.style.display = "block";
        emailVoteConfirmation.style.display = "none";
        emailVoteModal.style.display = "flex";
        document.body.style.overflow = "hidden"; // Prevent scrolling behind modal
    }

    // Close email voting modal
    emailVoteModalClose.addEventListener("click", () => {
        emailVoteModal.style.display = "none";
        document.body.style.overflow = ""; // Restore scrolling
    });

    // Close email modal when clicking outside content
    emailVoteModal.addEventListener("click", (e) => {
        if (e.target === emailVoteModal) {
            emailVoteModal.style.display = "none";
            document.body.style.overflow = ""; // Restore scrolling
        }
    });

    // Handle email vote form submission
    emailVoteForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        const email = document.getElementById("emailInput").value;
        const candidateId = candidateIdInput.value;

        // Validate email is a Berkeley email
        if (!email.endsWith("@berkeley.edu")) {
            showToast("Please use your UC Berkeley email address", "error");
            return;
        }

        try {
            // Show loading indicator
            const submitBtn = emailVoteForm.querySelector("button[type='submit']");
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            submitBtn.disabled = true;

            // Send to server
            const response = await fetch("https://server1.misscal.net/vote-by-email", {
                method: "POST",
                credentials: "include",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    email: email,
                    candidateId: candidateId
                })
            });

            const data = await response.json();

            if (response.ok) {
                // Show confirmation message
                emailVoteForm.style.display = "none";
                emailVoteConfirmation.style.display = "block";
                showToast("Verification email sent! Please check your inbox.", "success");
            } else {
                showToast(data.message || "Failed to send verification email", "error");

                // Reset button
                submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Verification Email';
                submitBtn.disabled = false;
            }
        } catch (error) {
            console.error("Error:", error);
            showToast("An error occurred. Please try again.", "error");

            // Reset button
            const submitBtn = emailVoteForm.querySelector("button[type='submit']");
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Verification Email';
            submitBtn.disabled = false;
        }
    });
    // Initialize the page
    document.addEventListener('DOMContentLoaded', () => {
        // Start countdown timer and update every second
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Load the leaderboard
        loadLeaderboard();

        // Add animation classes to elements when they come into view
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate__animated', entry.target.dataset.animation);
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('[data-animation]').forEach(element => {
            observer.observe(element);
        });

        // Show welcome toast
        setTimeout(() => {
            showToast("Welcome to Miss Cal! Check out our top contestants.", "info");
        }, 1000);
    });
</script>